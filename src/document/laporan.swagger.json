{
  "tags": [
    {
      "name": "UMKM",
      "description": "Endpoint untuk pendaftaran, pengelolaan dan verifikasi UMKM"
    },
    {
      "name": "Laporan Keuangan",
      "description": "Endpoint untuk pengelolaan laporan keuangan Admin dan UMKM"
    },
    {
      "name": "Laporan Penjualan",
      "description": "Endpoint untuk laporan penjualan UMKM (summary, chart, top products)"
    },
    {
      "name": "Wilayah",
      "description": "Endpoint untuk mendapatkan data wilayah (provinsi, kabupaten, kecamatan, desa)"
    }
  ],
  "paths": {
    "/api/v1/auth/umkm": {
      "post": {
        "tags": ["UMKM"],
        "summary": "Registrasi UMKM (jika belum login buat user baru)",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password",
                  "phone_number",
                  "name",
                  "namaUmkm",
                  "ktp",
                  "suratIzinEdar",
                  "addresses"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email user",
                    "example": "umkmraisa@gmail.com"
                  },
                  "password": {
                    "type": "string",
                    "description": "Password untuk user",
                    "example": "raisa123"
                  },
                  "phone_number": {
                    "type": "string",
                    "description": "Nomor telepon (format: 08...)",
                    "example": "081234567890"
                  },
                  "name": {
                    "type": "string",
                    "description": "Nama pemilik / user",
                    "example": "Raisa"
                  },
                  "namaUmkm": {
                    "type": "string",
                    "description": "Nama UMKM",
                    "example": "Sekolah Kopi Raisa"
                  },
                  "ktp": {
                    "type": "string",
                    "description": "Nomor KTP (opsional)",
                    "example": "3501234567890001"
                  },
                  "suratIzinEdar": {
                    "type": "string",
                    "format": "binary",
                    "description": "Upload gambar surat izin edar (file)"
                  },
                  "addresses": {
                    "type": "string",
                    "description": "JSON Array berisi alamat. FORMAT BARU: gunakan id_desa ",
                    "example": "[\n  {\n    \"id_desa\": 9211002,\n    \"alamat\": \"Jl. PB Sudirman No.10\",\n    \"kode_pos\": \"68124\"\n  }\n]"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "UMKM registered successfully"
          },
          "400": {
            "description": "Invalid request or duplicate email/phone"
          }
        }
      },
      "get": {
        "tags": ["UMKM"],
        "summary": "Daftar semua UMKM (admin)",
        "security": [{ "cookieAuth": [] }],
        "responses": {
          "200": { "description": "Daftar UMKM dikembalikan" },
          "403": { "description": "Akses ditolak" }
        }
      }
    },
    "/api/v1/auth/umkm/user/{userId}": {
      "get": {
        "tags": ["UMKM"],
        "summary": "Ambil UMKM berdasarkan userId (owner atau admin)",
        "description": "Mengambil data UMKM berdasarkan ID user. Hanya owner atau admin yang bisa mengakses.",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          { 
            "name": "userId", 
            "in": "path", 
            "required": true, 
            "schema": { "type": "integer" },
            "description": "ID User pemilik UMKM",
            "example": 5
          }
        ],
        "responses": {
          "200": { 
            "description": "Data UMKM dikembalikan",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id_umkm": { "type": "integer", "example": 1 },
                        "id_user": { "type": "integer", "example": 5 },
                        "nama_umkm": { "type": "string", "example": "Sekolah Kopi Raisa" },
                        "ktp": { "type": "string", "example": "3501234567890001" },
                        "surat_izin_edar": {
                          "type": "array",
                          "items": { "type": "string" },
                          "example": ["https://res.cloudinary.com/xxx/suratIzin1.jpg"]
                        },
                        "status_verifikasi": {
                          "type": "string",
                          "enum": ["Pending", "Verified", "Rejected"],
                          "example": "Pending"
                        },
                        "alasan_penolakan": {
                          "type": "string",
                          "nullable": true,
                          "example": null
                        },
                        "User": {
                          "type": "object",
                          "properties": {
                            "id": { "type": "integer", "example": 5 },
                            "name": { "type": "string", "example": "Raisa" },
                            "email": { "type": "string", "example": "umkmraisa@gmail.com" },
                            "phone_number": { "type": "string", "example": "081234567890" },
                            "role": { "type": "string", "example": "USER" }
                          }
                        },
                        "addresses": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id_alamat": { "type": "integer", "example": 1 },
                              "alamat": { "type": "string", "example": "Jl. PB Sudirman No.10" },
                              "kode_pos": { "type": "string", "example": "68124" },
                              "desa": {
                                "type": "object",
                                "properties": {
                                  "id_desa": { "type": "integer", "example": 9211002 },
                                  "nama_desa": { "type": "string", "example": "Antirogo" },
                                  "kecamatan": {
                                    "type": "object",
                                    "properties": {
                                      "id_kecamatan": { "type": "integer", "example": 921100 },
                                      "nama_kecamatan": { "type": "string", "example": "Sumbersari" }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": { 
            "description": "userId tidak diberikan",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "userId dibutuhkan" }
                  }
                }
              }
            }
          },
          "403": { 
            "description": "Akses ditolak - bukan owner atau admin",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { 
                      "type": "string", 
                      "example": "Access denied. Hanya pemilik atau admin yang boleh mengakses data ini." 
                    }
                  }
                }
              }
            }
          },
          "404": { 
            "description": "Data UMKM tidak ditemukan untuk user ini",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "Data UMKM tidak ditemukan" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/umkm/{idUmkm}": {
      "get": {
        "tags": ["UMKM"],
        "summary": "Ambil UMKM berdasarkan idUmkm (owner atau admin)",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          { "name": "idUmkm", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": { "description": "Data UMKM dikembalikan" },
          "403": { "description": "Akses ditolak" },
          "404": { "description": "Data UMKM tidak ditemukan" }
        }
      },
      "put": {
        "tags": ["UMKM"],
        "summary": "Update UMKM (owner atau admin)",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          { "name": "idUmkm",
            "in": "path", 
            "required": true, 
            "schema": { "type": "integer" },
            "description": "ID UMKM yang akan diupdate",
            "example": 1
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { 
                    "type": "string",
                    "description": "Nama pemilik UMKM (update data user)",
                    "example": "Budi Santoso"
                  },
                  "email": { 
                    "type": "string",
                    "format": "email",
                    "description": "Email pemilik UMKM (update data user)",
                    "example": "budi.santoso@gmail.com"
                  },
                  "phone_number": { 
                    "type": "string",
                    "description": "Nomor HP pemilik UMKM (update data user)",
                    "example": "081234567890"
                  },
                  "password": { 
                    "type": "string",
                    "description": "Password baru (opsional, akan di-hash otomatis). Minimal 6 karakter.",
                    "example": "newpassword123"
                  },
                  "namaUmkm": { 
                    "type": "string",
                    "description": "Nama UMKM",
                    "example": "Kopi Raisa Jaya"
                  },
                  "ktp": { 
                    "type": "string",
                    "description": "Nomor KTP pemilik (16 digit)",
                    "example": "3506012345678901"
                  },
                  "addresses": {
                    "type": "string",
                    "description": "JSON Array alamat dengan format baru menggunakan id_desa. Alamat lama akan dihapus dan diganti dengan yang baru.",
                    "example": "[\n  {\n    \"id_desa\": 9211002,\n    \"alamat\": \"Jl. PB Sudirman No.10 Updated\",\n    \"kode_pos\": \"68124\"\n  },\n  {\n    \"id_desa\": 9211001,\n    \"alamat\": \"Jl. Alternatif No.5\",\n    \"kode_pos\": \"68121\"\n  }\n]"
                  },
                  "suratIzinEdar": { 
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "Upload file surat izin edar baru (bisa multiple files). File lama akan dihapus dari Cloudinary dan diganti dengan yang baru."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": { 
            "description": "Update UMKM berhasil",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Update UMKM berhasil"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id_umkm": { "type": "integer", "example": 1 },
                        "id_user": { "type": "integer", "example": 5 },
                        "nama_umkm": { "type": "string", "example": "Kopi Raisa Jaya" },
                        "ktp": { "type": "string", "example": "3506012345678901" },
                        "suratIzinEdar": {
                          "type": "array",
                          "items": { "type": "string" },
                          "example": [
                            "https://res.cloudinary.com/xxx/suratIzinEdar1.jpg",
                            "https://res.cloudinary.com/xxx/suratIzinEdar2.pdf"
                          ]
                        },
                        "status_verifikasi": {
                          "type": "string",
                          "enum": ["Pending", "Verified", "Rejected"],
                          "example": "Verified"
                        },
                        "User": {
                          "type": "object",
                          "properties": {
                            "id": { "type": "integer", "example": 5 },
                            "name": { "type": "string", "example": "Budi Santoso" },
                            "email": { "type": "string", "example": "budi.santoso@gmail.com" },
                            "phone_number": { "type": "string", "example": "081234567890" },
                            "role": { "type": "string", "example": "UMKM" }
                          }
                        },
                        "addresses": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id_alamat": { "type": "integer", "example": 1 },
                              "alamat": { "type": "string", "example": "Jl. PB Sudirman No.10 Updated" },
                              "kode_pos": { "type": "string", "example": "68124" },
                              "desa": {
                                "type": "object",
                                "properties": {
                                  "id_desa": { "type": "integer", "example": 9211002 },
                                  "nama_desa": { "type": "string", "example": "Antirogo" },
                                  "kecamatan": {
                                    "type": "object",
                                    "properties": {
                                      "id_kecamatan": { "type": "integer", "example": 921100 },
                                      "nama_kecamatan": { "type": "string", "example": "Sumbersari" },
                                      "kabupaten": {
                                        "type": "object",
                                        "properties": {
                                          "id_kabupaten": { "type": "integer", "example": 9211 },
                                          "nama_kabupaten": { "type": "string", "example": "Kabupaten Jember" },
                                          "provinsi": {
                                            "type": "object",
                                            "properties": {
                                              "id_provinsi": { "type": "integer", "example": 92 },
                                              "nama_provinsi": { "type": "string", "example": "Jawa Timur" }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": { 
            "description": "Validasi gagal atau ID Desa tidak valid",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Validasi gagal!"
                    },
                    "errors": {
                      "type": "object",
                      "example": {
                        "email": "Email tidak valid",
                        "password": "Password minimal 6 karakter",
                        "ktp": "KTP harus 16 digit"
                      }
                    }
                  }
                }
              }
            }
          },
          "403": { 
            "description": "Akses ditolak - hanya owner atau admin",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Access denied. Hanya pemilik atau admin yang boleh mengubah data ini."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Data UMKM tidak ditemukan",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Data UMKM tidak ditemukan"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Kesalahan server",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Terjadi kesalahan di server"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/umkm/{idUmkm}/verify": {
      "post": {
        "tags": ["UMKM"],
        "summary": "Verifikasi UMKM oleh admin (approve/reject)",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          { "name": "idUmkm", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "approved": { "type": "boolean" },
                  "reason": { "type": "string" }
                },
                "required": ["approved"]
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Verifikasi berhasil dan email notifikasi dikirim jika perlu" },
          "403": { "description": "Akses ditolak" },
          "404": { "description": "Data UMKM tidak ditemukan" }
        }
      }
    },
    "/api/v1/laporan-keuangan": {
      "post": {
        "tags": ["Laporan Keuangan"],
        "summary": "Create laporan keuangan baru (Admin only)",
        "description": "Hanya admin yang boleh membuat laporan keuangan manual.",
        "security": [{ "cookieAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["periode", "report_date"],
                "properties": {
                  "periode": { "type": "string", "example": "Januari 2025" },
                  "report_date": { "type": "string", "format": "date", "example": "2025-01-15" },
                  "description": { "type": "string", "example": "Laporan keuangan bulan Januari" },
                  "income": { "type": "number", "example": 5000000 },
                  "pengeluarans": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": ["tanggal", "jumlah_pengeluaran"],
                      "properties": {
                        "tanggal": { "type": "string", "format": "date", "example": "2025-01-10" },
                        "jumlah_pengeluaran": { "type": "number", "example": 500000 },
                        "keterangan": { "type": "string", "example": "Pembelian bahan baku kopi" }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": { 
            "description": "Laporan berhasil dibuat",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "message": { "type": "string", "example": "Laporan keuangan berhasil dibuat" },
                    "data": { "type": "object" }
                  }
                }
              }
            }
          },
          "400": { "description": "Validasi gagal" },
          "403": { "description": "Hanya admin yang bisa membuat laporan keuangan" }
        }
      },
      "get": {
        "tags": ["Laporan Keuangan"],
        "summary": "Get all laporan keuangan",
        "description": "Admin dapat melihat semua laporan, UMKM hanya melihat laporan miliknya sendiri (laporan manual + pemasukan dari payment produk Tsarisma Coffee).",
        "security": [{ "cookieAuth": [] }],
        "responses": {
          "200": { 
            "description": "List laporan dengan summary",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "source": { "type": "string", "enum": ["manual", "payment"] },
                          "id": { "type": "integer" },
                          "periode": { "type": "string" },
                          "tanggal": { "type": "string", "format": "date-time" },
                          "description": { "type": "string" },
                          "pemasukan": { "type": "number" },
                          "pengeluaran": { "type": "number" },
                          "saldo": { "type": "number" }
                        }
                      }
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_income": { "type": "number" },
                        "total_expenses": { "type": "number" },
                        "saldo": { "type": "number" },
                        "jumlah_transaksi": { "type": "integer" },
                        "detail": {
                          "type": "object",
                          "properties": {
                            "jumlah_laporan_manual": { "type": "integer" },
                            "jumlah_payment": { "type": "integer" },
                            "income_manual": { "type": "number" },
                            "income_payment": { "type": "number" }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": { "description": "Akses ditolak" }
        }
      }
    },
    "/api/v1/laporan-keuangan/{id}": {
      "get": {
        "tags": ["Laporan Keuangan"],
        "summary": "Get laporan keuangan by ID",
        "description": "Admin dapat melihat semua laporan, UMKM hanya dapat melihat laporan miliknya sendiri.",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          { "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": { 
            "description": "Detail laporan keuangan",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id_financialreport": { "type": "integer" },
                        "periode": { "type": "string" },
                        "report_date": { "type": "string", "format": "date-time" },
                        "description": { "type": "string" },
                        "income": { "type": "number" },
                        "expenses": { "type": "number" },
                        "User": { "type": "object" },
                        "pengeluaran": { "type": "array" }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": { "description": "Anda tidak memiliki akses ke laporan ini" },
          "404": { "description": "Laporan tidak ditemukan" }
        }
      },
      "put": {
        "tags": ["Laporan Keuangan"],
        "summary": "Update laporan keuangan (Admin only)",
        "description": "Hanya admin yang boleh mengupdate laporan keuangan.",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          { "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "periode": { "type": "string" },
                  "report_date": { "type": "string", "format": "date" },
                  "description": { "type": "string" },
                  "income": { "type": "number" },
                  "pengeluarans": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "tanggal": { "type": "string", "format": "date" },
                        "jumlah_pengeluaran": { "type": "number" },
                        "keterangan": { "type": "string" }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Laporan berhasil diupdate" },
          "403": { "description": "Hanya admin yang bisa mengubah laporan" },
          "404": { "description": "Laporan tidak ditemukan" }
        }
      },
      "delete": {
        "tags": ["Laporan Keuangan"],
        "summary": "Delete laporan keuangan (Admin only)",
        "description": "Hanya admin yang boleh menghapus laporan keuangan.",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          { "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": { 
            "description": "Laporan berhasil dihapus",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "message": { "type": "string", "example": "Laporan keuangan berhasil dihapus" }
                  }
                }
              }
            }
          },
          "403": { "description": "Hanya admin yang bisa menghapus laporan" },
          "404": { "description": "Laporan tidak ditemukan" }
        }
      }
    },
    "/api/v1/penjualan/my-report": {
      "get": {
        "tags": ["Laporan Penjualan"],
        "summary": "Get laporan penjualan UMKM (UMKM only)",
        "description": "UMKM dapat melihat laporan penjualan produk mereka sendiri dengan summary (jumlah produk terjual, laba kotor, pajak 10%, laba bersih), chart penjualan per hari, dan top 5 products berdasarkan jumlah terjual.",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          {
            "in": "query",
            "name": "bulan",
            "schema": { "type": "integer", "minimum": 1, "maximum": 12 },
            "description": "Filter berdasarkan bulan (1-12)",
            "example": 9
          },
          {
            "in": "query",
            "name": "tahun",
            "schema": { "type": "integer" },
            "description": "Filter berdasarkan tahun (YYYY)",
            "example": 2025
          }
        ],
        "responses": {
          "200": {
            "description": "Laporan penjualan berhasil didapatkan",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "Laporan penjualan berhasil didapatkan!" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "partner": {
                          "type": "object",
                          "properties": {
                            "id": { "type": "integer", "example": 1 },
                            "nama": { "type": "string", "example": "UMKM Kopi Raisa" },
                            "owner": { "type": "string", "example": "Pak Budi" }
                          }
                        },
                        "periode": { "type": "string", "example": "September 2025" },
                        "summary": {
                          "type": "object",
                          "properties": {
                            "jumlahProdukTerjual": { "type": "integer", "example": 20 },
                            "labaBersih": { "type": "string", "example": "Rp 225.000" },
                            "labaBersihRaw": { "type": "number", "example": 225000 },
                            "labaKotor": { "type": "string", "example": "Rp 250.000" },
                            "labaKotorRaw": { "type": "number", "example": 250000 },
                            "pajak": { "type": "string", "example": "Rp 25.000" },
                            "pajakRaw": { "type": "number", "example": 25000 },
                            "persentasePajak": { "type": "string", "example": "10%" }
                          }
                        },
                        "chart": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "tanggal": { "type": "integer", "example": 1 },
                              "totalPenjualan": { "type": "number", "example": 50000 }
                            }
                          },
                          "description": "Data penjualan per hari dalam bulan (tanggal 1-31)"
                        },
                        "topProducts": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "ranking": { "type": "integer", "example": 1 },
                              "namaProduk": { "type": "string", "example": "Kopi Arabika Premium" },
                              "jumlahTerjual": { "type": "integer", "example": 10 },
                              "totalPendapatan": { "type": "string", "example": "Rp 150.000" },
                              "totalPendapatanRaw": { "type": "number", "example": 150000 }
                            }
                          },
                          "description": "Top 5 produk berdasarkan jumlah terjual"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": { "description": "Akses ditolak! Endpoint ini hanya untuk UMKM." },
          "404": { "description": "Profil partner tidak ditemukan" },
          "500": { "description": "Terjadi kesalahan di server" }
        }
      }
    },
    "/api/v1/penjualan/admin/report": {
      "get": {
        "tags": ["Laporan Penjualan"],
        "summary": "Get laporan penjualan semua UMKM (Admin only)",
        "description": "Admin dapat melihat laporan penjualan dari semua UMKM dengan summary total dan list per UMKM.",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          {
            "in": "query",
            "name": "bulan",
            "schema": { "type": "integer", "minimum": 1, "maximum": 12 },
            "description": "Filter berdasarkan bulan (1-12)",
            "example": 9
          },
          {
            "in": "query",
            "name": "tahun",
            "schema": { "type": "integer" },
            "description": "Filter berdasarkan tahun (YYYY)",
            "example": 2025
          }
        ],
        "responses": {
          "200": {
            "description": "Laporan penjualan semua UMKM berhasil didapatkan",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "Laporan penjualan semua UMKM berhasil didapatkan!" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "periode": { "type": "string", "example": "September 2025" },
                        "totalSummary": {
                          "type": "object",
                          "properties": {
                            "totalJumlahProdukTerjual": { "type": "integer", "example": 100 },
                            "totalLabaBersih": { "type": "string", "example": "Rp 4.500.000" },
                            "totalLabaBersihRaw": { "type": "number", "example": 4500000 },
                            "totalLabaKotor": { "type": "string", "example": "Rp 5.000.000" },
                            "totalLabaKotorRaw": { "type": "number", "example": 5000000 },
                            "totalPajak": { "type": "string", "example": "Rp 500.000" },
                            "totalPajakRaw": { "type": "number", "example": 500000 }
                          }
                        },
                        "umkmList": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "partnerId": { "type": "integer", "example": 1 },
                              "namaUMKM": { "type": "string", "example": "UMKM Kopi Raisa" },
                              "owner": { "type": "string", "example": "Pak Budi" },
                              "jumlahProdukTerjual": { "type": "integer", "example": 50 },
                              "labaBersih": { "type": "string", "example": "Rp 2.250.000" },
                              "labaBersihRaw": { "type": "number", "example": 2250000 },
                              "labaKotor": { "type": "string", "example": "Rp 2.500.000" },
                              "labaKotorRaw": { "type": "number", "example": 2500000 }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": { "description": "Akses ditolak! Hanya admin yang bisa mengakses." },
          "404": { "description": "Tidak ada data UMKM yang terdaftar" },
          "500": { "description": "Terjadi kesalahan di server" }
        }
      }
    },
    "/api/v1/penjualan/admin/partner/{partnerId}": {
      "get": {
        "tags": ["Laporan Penjualan"],
        "summary": "Get laporan penjualan UMKM berdasarkan Partner ID (Admin only)",
        "description": "Admin dapat melihat detail laporan penjualan UMKM spesifik berdasarkan partner_id.",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          { "in": "path", "name": "partnerId", "required": true, "schema": { "type": "integer" }, "description": "ID Partner UMKM", "example": 1 },
          { "in": "query", "name": "bulan", "schema": { "type": "integer", "minimum": 1, "maximum": 12 }, "example": 9 },
          { "in": "query", "name": "tahun", "schema": { "type": "integer" }, "example": 2025 }
        ],
        "responses": {
          "200": { "description": "Detail laporan penjualan UMKM (dengan info partner dan user)" },
          "400": { "description": "Partner belum terhubung dengan user UMKM" },
          "403": { "description": "Hanya admin yang bisa mengakses" },
          "404": { "description": "Partner tidak ditemukan" }
        }
      }
    },
    "/api/v1/penjualan/my-top-products": {
      "get": {
        "tags": ["Laporan Penjualan"],
        "summary": "Get top products UMKM (UMKM only)",
        "description": "UMKM dapat melihat daftar produk terlaris mereka berdasarkan jumlah terjual dengan filter periode dan limit.",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          {
            "in": "query",
            "name": "bulan",
            "schema": { "type": "integer", "minimum": 1, "maximum": 12 },
            "description": "Filter berdasarkan bulan (1-12)",
            "example": 9
          },
          {
            "in": "query",
            "name": "tahun",
            "schema": { "type": "integer" },
            "description": "Filter berdasarkan tahun (YYYY)",
            "example": 2025
          },
          {
            "in": "query",
            "name": "limit",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100 },
            "description": "Jumlah produk yang ditampilkan (default: 10)",
            "example": 10
          }
        ],
        "responses": {
          "200": {
            "description": "Top products berhasil didapatkan",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { 
                      "type": "string", 
                      "example": "Top products berhasil didapatkan!" 
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "partner": {
                          "type": "object",
                          "properties": {
                            "id": { "type": "integer", "example": 1 },
                            "nama": { "type": "string", "example": "UMKM Kopi Raisa" },
                            "owner": { "type": "string", "example": "Pak Budi" }
                          }
                        },
                        "periode": { 
                          "type": "string", 
                          "example": "September 2025" 
                        },
                        "limit": { 
                          "type": "integer", 
                          "example": 10,
                          "description": "Jumlah produk yang diminta" 
                        },
                        "totalProducts": { 
                          "type": "integer", 
                          "example": 10,
                          "description": "Jumlah produk yang dikembalikan" 
                        },
                        "products": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "ranking": { 
                                "type": "integer", 
                                "example": 1,
                                "description": "Peringkat produk berdasarkan jumlah terjual" 
                              },
                              "productId": { 
                                "type": "integer", 
                                "example": 5 
                              },
                              "namaProduk": { 
                                "type": "string", 
                                "example": "Kopi Arabika Premium" 
                              },
                              "gambarProduk": { 
                                "type": "string", 
                                "example": "https://cloudinary.com/image.jpg" 
                              },
                              "jumlahTerjual": { 
                                "type": "integer", 
                                "example": 50,
                                "description": "Total unit terjual" 
                              },
                              "totalPendapatan": { 
                                "type": "string", 
                                "example": "Rp 750.000" 
                              },
                              "totalPendapatanRaw": { 
                                "type": "number", 
                                "example": 750000 
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": { 
            "description": "Akses ditolak! Endpoint ini hanya untuk UMKM." 
          },
          "404": { 
            "description": "Profil partner tidak ditemukan" 
          },
          "500": { 
            "description": "Terjadi kesalahan di server" 
          }
        }
      }
    },
    "/api/v1/penjualan/admin/top-products": {
      "get": {
        "tags": ["Laporan Penjualan"],
        "summary": "Get top products dari semua UMKM (Admin only)",
        "description": "Admin dapat melihat daftar produk terlaris dari semua UMKM yang terdaftar, diurutkan berdasarkan jumlah terjual.",
        "security": [{ "cookieAuth": [] }],
        "parameters": [
          {
            "in": "query",
            "name": "bulan",
            "schema": { "type": "integer", "minimum": 1, "maximum": 12 },
            "description": "Filter berdasarkan bulan (1-12)",
            "example": 9
          },
          {
            "in": "query",
            "name": "tahun",
            "schema": { "type": "integer" },
            "description": "Filter berdasarkan tahun (YYYY)",
            "example": 2025
          },
          {
            "in": "query",
            "name": "limit",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100 },
            "description": "Jumlah produk yang ditampilkan (default: 10)",
            "example": 10
          }
        ],
        "responses": {
          "200": {
            "description": "Top products semua UMKM berhasil didapatkan",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { 
                      "type": "string", 
                      "example": "Top products semua UMKM berhasil didapatkan!" 
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "periode": { 
                          "type": "string", 
                          "example": "September 2025" 
                        },
                        "limit": { 
                          "type": "integer", 
                          "example": 10 
                        },
                        "totalProducts": { 
                          "type": "integer", 
                          "example": 10 
                        },
                        "products": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "ranking": { 
                                "type": "integer", 
                                "example": 1 
                              },
                              "productId": { 
                                "type": "integer", 
                                "example": 5 
                              },
                              "namaProduk": { 
                                "type": "string", 
                                "example": "Kopi Arabika Premium" 
                              },
                              "gambarProduk": { 
                                "type": "string", 
                                "example": "https://cloudinary.com/image.jpg" 
                              },
                              "namaUMKM": { 
                                "type": "string", 
                                "example": "UMKM Kopi Raisa",
                                "description": "Nama UMKM pemilik produk" 
                              },
                              "partnerId": { 
                                "type": "integer", 
                                "example": 1,
                                "description": "ID Partner UMKM" 
                              },
                              "jumlahTerjual": { 
                                "type": "integer", 
                                "example": 50 
                              },
                              "totalPendapatan": { 
                                "type": "string", 
                                "example": "Rp 750.000" 
                              },
                              "totalPendapatanRaw": { 
                                "type": "number", 
                                "example": 750000 
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": { 
            "description": "Akses ditolak! Hanya admin yang bisa mengakses." 
          },
          "404": { 
            "description": "Tidak ada data UMKM yang terdaftar" 
          },
          "500": { 
            "description": "Terjadi kesalahan di server" 
          }
        }
      }
    },
    "/api/v1/wilayah/provinces": {
      "get": {
        "tags": ["Wilayah"],
        "summary": "Get all data provinsi (sementara cuma Jawa Timur)",
        "description": "Mengambil daftar provinsi. Untuk sistem ini hanya menampilkan Jawa Timur dari API eksternal.",
        "responses": {
          "200": {
            "description": "List provinsi berhasil diambil",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "code": {
                            "type": "string",
                            "example": "35",
                            "description": "Kode provinsi"
                          },
                          "name": {
                            "type": "string",
                            "example": "JAWA TIMUR",
                            "description": "Nama provinsi"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Provinsi tidak ditemukan",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Provinsi Jawa Timur tidak ditemukan"
                    }
                  }
                }
              }
            }
          },
          "502": {
            "description": "Gagal mengambil data dari upstream API",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Failed to fetch provinces: upstream error"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/wilayah/regencies/{provinceCode}": {
      "get": {
        "tags": ["Wilayah"],
        "summary": "Get data wilayah kabupaten berdasarkan kode provinsi",
        "description": "Mengambil daftar kabupaten berdasarkan kode provinsi. Hanya menampilkan 7 kabupaten Tapal Kuda dari API eksternal.",
        "parameters": [
          {
            "name": "provinceCode",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "35"
            },
            "description": "Kode provinsi (gunakan '35' untuk Jawa Timur)"
          }
        ],
        "responses": {
          "200": {
            "description": "List kabupaten Tapal Kuda berhasil diambil",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "code": {
                            "type": "string",
                            "example": "35.09",
                            "description": "Kode kabupaten dengan format titik"
                          },
                          "name": {
                            "type": "string",
                            "example": "KABUPATEN JEMBER",
                            "description": "Nama kabupaten"
                          },
                          "province_code": {
                            "type": "string",
                            "example": "35",
                            "description": "Kode provinsi induk"
                          }
                        }
                      },
                      "example": [
                        { "code": "35.08", "name": "KABUPATEN LUMAJANG", "province_code": "35" },
                        { "code": "35.09", "name": "KABUPATEN JEMBER", "province_code": "35" },
                        { "code": "35.10", "name": "KABUPATEN BANYUWANGI", "province_code": "35" },
                        { "code": "35.11", "name": "KABUPATEN BONDOWOSO", "province_code": "35" },
                        { "code": "35.12", "name": "KABUPATEN SITUBONDO", "province_code": "35" },
                        { "code": "35.13", "name": "KABUPATEN PROBOLINGGO", "province_code": "35" },
                        { "code": "35.14", "name": "KABUPATEN PASURUAN", "province_code": "35" }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Parameter provinceCode tidak diberikan",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "provinceCode param is required"
                    }
                  }
                }
              }
            }
          },
          "502": {
            "description": "Gagal mengambil data dari upstream API"
          }
        }
      }
    },
    "/api/v1/wilayah/districts/{regencyCode}": {
      "get": {
        "tags": ["Wilayah"],
        "summary": "Get data kecamatan berdasarkan kode kabupaten",
        "description": "Mengambil daftar kecamatan berdasarkan kode kabupaten dari API eksternal.",
        "parameters": [
          {
            "name": "regencyCode",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "35.09"
            },
            "description": "Kode kabupaten dengan format titik (contoh: '35.09' untuk Jember)"
          }
        ],
        "responses": {
          "200": {
            "description": "List kecamatan berhasil diambil",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "code": {
                            "type": "string",
                            "example": "35.09.21",
                            "description": "Kode kecamatan"
                          },
                          "name": {
                            "type": "string",
                            "example": "Sumbersari",
                            "description": "Nama kecamatan"
                          },
                          "regency_code": {
                            "type": "string",
                            "example": "35.09",
                            "description": "Kode kabupaten induk"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Parameter regencyCode tidak diberikan"
          },
          "502": {
            "description": "Gagal mengambil data dari upstream API"
          }
        }
      }
    },
    "/api/v1/wilayah/villages/{districtCode}": {
      "get": {
        "tags": ["Wilayah"],
        "summary": "Get data desa berdasarkan kode kecamatan",
        "description": "Mengambil daftar desa/kelurahan berdasarkan kode kecamatan dari API eksternal.",
        "parameters": [
          {
            "name": "districtCode",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "example": "35.09.21"
            },
            "description": "Kode kecamatan dengan format titik (contoh: '35.09.21' untuk Sumbersari)"
          }
        ],
        "responses": {
          "200": {
            "description": "List desa berhasil diambil",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "code": {
                            "type": "string",
                            "example": "35.09.21.1001",
                            "description": "Kode desa/kelurahan"
                          },
                          "name": {
                            "type": "string",
                            "example": "Kebonsari",
                            "description": "Nama desa/kelurahan"
                          },
                          "district_code": {
                            "type": "string",
                            "example": "35.09.21",
                            "description": "Kode kecamatan induk"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Parameter districtCode tidak diberikan"
          },
          "502": {
            "description": "Gagal mengambil data dari upstream API"
          }
        }
      }
    },
    "/api/v1/wilayah/validate/{villageCode}": {
      "get": {
        "tags": ["Wilayah"],
        "summary": "validasi kode desa berdasarkan ID desa",
        "description": "Memvalidasi apakah ID desa ada di database wilayah Tapal Kuda.",
        "parameters": [
          {
            "name": "villageCode",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "example": 9211001
            },
            "description": "ID Desa yang akan divalidasi (integer, bukan string dengan titik). Contoh: 9211001 untuk Kebonsari"
          }
        ],
        "responses": {
          "200": {
            "description": "Desa ditemukan dan valid di wilayah Tapal Kuda",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean",
                      "example": true,
                      "description": "Status validasi desa"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id_desa": {
                          "type": "integer",
                          "example": 350921001,
                          "description": "ID desa di database"
                        },
                        "nama_desa": {
                          "type": "string",
                          "example": "Kebonsari",
                          "description": "Nama desa"
                        },
                        "kecamatan": {
                          "type": "object",
                          "properties": {
                            "id_kecamatan": {
                              "type": "integer",
                              "example": 350921
                            },
                            "nama_kecamatan": {
                              "type": "string",
                              "example": "Sumbersari"
                            },
                            "kabupaten": {
                              "type": "object",
                              "properties": {
                                "id_kabupaten": {
                                  "type": "integer",
                                  "example": 3509
                                },
                                "nama_kabupaten": {
                                  "type": "string",
                                  "example": "Kabupaten Jember"
                                },
                                "provinsi": {
                                  "type": "object",
                                  "properties": {
                                    "id_provinsi": {
                                      "type": "integer",
                                      "example": 35
                                    },
                                    "nama_provinsi": {
                                      "type": "string",
                                      "example": "Jawa Timur"
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Desa tidak ditemukan di wilayah Tapal Kuda",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Desa tidak ditemukan di wilayah Tapal Kuda"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Database connection error"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}